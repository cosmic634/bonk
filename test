<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bonk.io Skin Gallery</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, sans-serif;
      background: radial-gradient(circle at top, #1b1f2a, #0f1117);
      color: #e6e8ee;
    }
    header { padding: 3rem 1.5rem; text-align: center; }
    header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
    header p { color: #b7bdd3; max-width: 600px; margin: 0 auto; }
    .controls { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem; }
    .controls input { background: #161a24; border: 1px solid #2a3045; color: #fff; padding: 0.6rem 0.8rem; border-radius: 0.75rem; }
    .controls button { background: linear-gradient(135deg, #6cf, #8a7cff); border: none; color: #0b0d14; padding: 0.6rem 1.2rem; border-radius: 0.75rem; font-weight: 600; cursor: pointer; }
    main { padding: 2rem 1.5rem 4rem; max-width: 1200px; margin: 0 auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1.25rem; }
    .card { background: #161a24; border: 1px solid #242a3f; border-radius: 1.25rem; padding: 1rem; text-align: center; transition: transform 0.15s ease, box-shadow 0.15s ease; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,0.35); }
    canvas { display: block; margin: 0 auto 0.75rem; background: #0f1117; border-radius: 50%; }
    .card h3 { font-size: 0.95rem; margin: 0.25rem 0 0; font-weight: 600; }
    footer { text-align: center; padding: 2rem 1rem; color: #7f86ad; font-size: 0.85rem; }
  </style>
</head>
<body>
  <header>
    <h1>Bonk.io Skin Gallery</h1>
    <p>Browse, preview, and share custom Bonk.io skins. Upload a skin JSON or explore featured designs.</p>

    <div class="controls">
      <input type="file" id="fileInput" accept="application/json" />
      <input type="text" id="searchInput" placeholder="Search skins…" />
      <button id="addDemo">Add Demo Skins</button>
    </div>
  </header>

  <main>
    <section class="grid" id="skinGrid"></section>
  </main>

  <footer>
    Not affiliated with Bonk.io · Made for the Bonk community
  </footer>

  <script>
    const grid = document.getElementById('skinGrid');
    const fileInput = document.getElementById('fileInput');
    const searchInput = document.getElementById('searchInput');
    const addDemoBtn = document.getElementById('addDemo');

    let skins = [];

    function bonkColor(num) {
      return '#' + num.toString(16).padStart(6, '0');
    }

    function renderSkin(canvas, layers) {
      const ctx = canvas.getContext('2d');
      const size = canvas.width;
      ctx.clearRect(0, 0, size, size);
      ctx.save();
      ctx.translate(size / 2, size / 2);

      layers.forEach(l => {
        ctx.save();
        ctx.translate(l.x, l.y);
        ctx.rotate((l.angle || 0) * Math.PI / 180);
        ctx.scale(l.flipX ? -1 : 1, l.flipY ? -1 : 1);
        ctx.fillStyle = bonkColor(l.color || 0xffffff);

        // simplified shape rendering (circle placeholder)
        ctx.beginPath();
        ctx.arc(0, 0, 20 * (l.scale || 1), 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      });

      ctx.restore();
    }

    function render() {
      const query = searchInput.value.toLowerCase();
      grid.innerHTML = '';

      skins.filter(s => s.name.toLowerCase().includes(query))
        .forEach(skin => {
          const card = document.createElement('div');
          card.className = 'card';

          const canvas = document.createElement('canvas');
          canvas.width = canvas.height = 120;

          if (skin.layers) renderSkin(canvas, skin.layers);

          const title = document.createElement('h3');
          title.textContent = skin.name;

          card.appendChild(canvas);
          card.appendChild(title);
          grid.appendChild(card);
        });
    }

    fileInput.addEventListener('change', async e => {
      const file = e.target.files[0];
      if (!file) return;
      try {
        const text = await file.text();
        const json = JSON.parse(text);
        skins.push({ name: file.name.replace('.json', ''), layers: json.layers || [] });
        render();
      } catch {
        alert('Invalid Bonk.io skin JSON');
      }
    });

    searchInput.addEventListener('input', render);

    addDemoBtn.addEventListener('click', () => {
      skins.push({
        name: 'Demo Smiley',
        layers: [
          { x: 0, y: 0, scale: 1, color: 0xffff00 },
          { x: -10, y: -5, scale: 0.2, color: 0x000000 },
          { x: 10, y: -5, scale: 0.2, color: 0x000000 }
        ]
      });
      render();
    });
  </script>
</body>
</html>
